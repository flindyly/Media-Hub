import{d as A,o,m as F,l as M,a as e,k as N,u,R as W,T as P,r,f as X,c as a,n as h,e as v,F as _,h as c,v as m,x as Y,j as C,t as g,q as L,y as Q,b}from"./index.ebfca88c.js";import{r as Z,s as ee,u as te,g as le,A as oe,d as se,U as ae,m as R,a as re,b as ne}from"./storageConfig.c80a5f01.js";const ie={class:"fixed z-50 inset-0 w-full h-full flex justify-center items-center overflow-x-hidden overflow-y-auto bg-gray-800 bg-opacity-80"},de={class:"bg-white w-fit mx-auto p-8 border border-gray rounded-sm"},ce=e("div",{class:"mb-4 flex justify-center items-center"},[e("h3",{class:"text-2xl font-semibold"},"Upload Successful!")],-1),ue={class:"flex justify-center items-center"},pe=e("button",{onclick:"location.reload()",class:"adx-button primary"}," Upload another item ",-1),be=e("button",{class:"adx-button accent"}," Back to Home ",-1),fe=A({__name:"PopUp",setup(z){return(p,y)=>(o(),F(P,{name:"modal"},{default:M(()=>[e("div",ie,[e("div",de,[ce,e("div",ue,[pe,N(u(W),{to:"/"},{default:M(()=>[be]),_:1})])])])]),_:1}))}}),he={class:"flex flex-col upload-view"},ve={class:"flex flex-1 overflow-y-auto"},me={class:"mx-auto px-8 w-3/4"},_e=e("h1",{class:"text-center"}," UPLOAD A MEDIA ITEM ",-1),ge=e("br",null,null,-1),ye={id:"steps"},xe={class:"grid grid-cols-3 overflow-hidden border border-gray-100 text-gray-500"},we=e("p",{class:"block text-xl"}," 1. Create a Folder ",-1),ke=[we],Ue=e("p",{class:"block text-xl"}," 2. Fill in Metadata ",-1),Se=e("p",{class:"block text-xl"}," 3. Upload Item to Box ",-1),Ve=[Se],Ce={key:0,class:"border-gray-100 border shadow-lg rounded p-8 mb-4",id:"1"},Ie=e("p",null,[b(" Please ensure you are logged into your "),e("a",{href:"https://universityofadelaide.box.com",target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 underline decoration-solid"}," Box account "),b(" before proceeding. ")],-1),je=e("br",null,null,-1),De=e("p",null,[b(" 1. If you have not yet been invited to the Media Hub Box folder, or have not yet stored any assets, please go to the "),e("a",{href:"https://universityofadelaide.box.com/v/media-hub-testing",target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 underline decoration-solid"}," Media Hub "),b(" folder and click "),e("strong",null,"'Join Account'"),b(". ")],-1),Le=e("br",null,null,-1),Me=e("p",null," 2. Inside the Media Hub folder, create another folder to store your media item and any supporting assets. ",-1),Te=e("br",null,null,-1),$e=e("p",null," 3. Navigate to your newly created folder. Copy the folder ID from the URL and paste it below: ",-1),Be={class:"flex flex-wrap"},Re=e("p",{class:"mr-2"}," https://universityofadelaide.app.box.com/folder/ ",-1),Ae=e("br",null,null,-1),Fe={class:"flex flex-wrap"},Ne=e("p",{class:"mr-2"},[b(" 4. Copy and paste the "),e("strong",null,"shared link"),b(" of your newly created folder here: ")],-1),Pe={key:1,class:"border-gray-100 border shadow-md rounded p-10 mb-4",id:"2"},ze={class:"w-full"},Ee=e("label",{class:"block uppercase tracking-wide text-gray-700 text-xl font-bold mb-2",for:"title"}," Title ",-1),Ge=e("label",{class:"block uppercase tracking-wide text-gray-700 text-xl font-bold mb-2",for:"keywords"}," Keywords ",-1),He=e("p",null," Separate each keyword using commas ",-1),Je=e("label",{for:"media-type",class:"block uppercase tracking-wide text-gray-700 text-xl font-bold mb-2"}," Select a Media Type ",-1),Ke=e("option",{disabled:"",value:""}," Select a type ",-1),Oe=["value"],qe={key:0,class:"block uppercase tracking-wide text-gray-700 text-l font-bold mb-2"},We={class:"grid grid-cols-2 w-fit mb-2"},Xe={class:"flex items-center mb-2 px-1"},Ye=["value","id"],Qe={for:"tags.shortcode",class:"ml-2"},Ze=e("p",{class:"block uppercase tracking-wide text-gray-700 text-xl font-bold mb-2"}," Select Schools/Departments ",-1),et=e("p",{class:"block uppercase tracking-wide text-gray-700 text-l font-bold mb-2"}," Schools ",-1),tt={class:"grid grid-cols-3 w-full mb-2"},lt={class:"flex items-center"},ot=["id","value"],st={for:"school",class:"ml-2 mr-2"},at=e("p",{class:"block uppercase tracking-wide text-gray-700 text-l font-bold mb-2"}," Departments ",-1),rt={class:"grid grid-cols-3 w-full mb-2"},nt={class:"flex items-center"},it=["id","value"],dt={for:"department",class:"ml-2 mr-2"},ct=e("label",{class:"block uppercase tracking-wide text-gray-700 text-xl font-bold mb-2",for:"keywords"}," Email ",-1),ut={class:"flex flex-wrap"},pt=e("p",{class:"bg-white text-gray-700 py-1 px-4"}," @adelaide.edu.au ",-1),bt=e("p",{class:"block uppercase tracking-wide text-gray-700 text-xl font-bold mb-2 mt-6"}," Upload a Thumbnail ",-1),ft={key:1,class:"flex flex-wrap"},ht=e("p",{class:"bg-white text-gray-700 py-1 mr-4"}," Youtube Link: ",-1),vt={key:2},mt={key:0,class:"flex items-center justify-center w-full"},_t=e("label",{for:"file-upload",class:"flex flex-col items-center justify-center h-48"},[e("div",{class:"flex flex-col items-center justify-center pt-5 pb-6 p-8 bg-gray-100 hover:bg-gray-200 w-full cursor-pointer border-2 border-dashed rounded-lg"},[e("svg",{"aria-hidden":"true",class:"w-10 h-10 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),e("p",{class:"mb-2"}," Select a File "),e("p",{class:"text-xs text-gray-500"}," SVG, PNG, JPG or GIF (MAX. 500 KB) ")])],-1),gt=[_t],yt=["src"],xt={key:2,class:"border-gray-100 border shadow-lg rounded p-8 mb-4",id:"3"},wt=e("br",null,null,-1),kt={class:"flex justify-center"},Ut=["src"],St={key:0,class:"pb-20 w-full h-fit"},Vt={key:1,class:"pb-20 w-full h-fit"},jt=A({__name:"UploadView",setup(z){const p=r(""),y=r(""),s=r(1),T=r(!1),$=r(!1),x=r(""),w=r(""),k=r(""),n=r(""),U=r([]),S=r([]),I=r([]),j=r(!1);let i=r(""),D=new Blob;const B=r(!1),V=r(""),E=X(()=>`https://universityofadelaide.app.box.com/embed/s/${y.value.trim().slice(39)}?sortColumn=date&view=list`);function G(f){D=f.target.files[0],i.value=URL.createObjectURL(D),console.log(`URL: ${i.value.trim()}`),j.value=!0}function H(){p.value!=""&&(T.value=!0),x.value!=""&&w.value!=""&&n.value!=""&&U.value!=[]&&S.value!=[]&&k.value!=""&&i.value!=""&&($.value=!0),s.value++}function J(){!T.value&&!$.value?alert("Not all fields have been filled. Please go back and check."):K()}async function K(){if(n.value=="Image"||n.value=="Interactive"){const t=Z(ee,`images/${p.value.trim()}`);await te(t,D).then(d=>{console.log("Uploaded a blob!")}),V.value=await le(t).then(d=>d),console.log(`Thumbnail link is ${V.value}`)}else V.value=i.value.trim().slice(17);const f={uid:p.value.trim(),type:U.value,title:x.value,keywords:O(w.value),contributor:k.value,school:S.value,department:I.value,thumbnail:V.value,thumbnailType:n.value=="Video"||n.value=="Animation"?"Video":"Static",visitCount:0,date:new Date,published:!1},l=oe(se,"MediaItems",p.value.trim());await ae(l,f),B.value=!0}function O(f){let l=f.split(","),t=[];return l.forEach(d=>{t.push(d.trim().toLowerCase())}),t}return(f,l)=>(o(),a(_,null,[e("div",he,[e("div",ve,[e("div",me,[_e,ge,e("div",ye,[e("ol",xe,[e("li",{class:h(["stageItem flex items-center justify-center p-4",s.value==1?"activeStage":s.value>1?"completeStage":""]),onClick:l[0]||(l[0]=t=>s.value=1)},ke,2),e("li",{class:h(["stageItem relative flex items-center justify-center p-4",s.value==2?"activeStage":s.value>2?"completeStage":""]),onClick:l[1]||(l[1]=t=>s.value=2)},[e("span",{class:h(["absolute -left-2 top-1/2 hidden h-4 w-4 -translate-y-1/2 rotate-45 border border-b-0 border-l-0 border-gray-100 bg-white sm:block",s.value==1?"activeStage":s.value>=2?"completeStage":""])},null,2),e("span",{class:h(["absolute -right-2 top-1/2 hidden h-4 w-4 -translate-y-1/2 rotate-45 border border-b-0 border-l-0 border-gray-100 bg-white sm:block",s.value==2?"activeStage":s.value>=3?"completeStage":""])},null,2),Ue],2),e("li",{class:h(["stageItem flex items-center justify-center p-4",s.value==3?"activeStage":s.value>3?"completeStage":""]),onClick:l[2]||(l[2]=t=>s.value=3)},Ve,2)])]),N(P,{name:"slide-fade",mode:"out-in"},{default:M(()=>[s.value==1?(o(),a("div",Ce,[Ie,je,De,Le,Me,Te,$e,e("div",Be,[Re,c(e("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=t=>p.value=t),class:"text-gray-700 border border-gray-300 rounded px-2 w-48 focus:bg-white",placeholder:"ID"},null,512),[[m,p.value]])]),Ae,e("div",Fe,[Ne,c(e("input",{type:"text","onUpdate:modelValue":l[4]||(l[4]=t=>y.value=t),class:"text-gray-700 border border-gray-300 rounded px-2 w-96 focus:bg-white",placeholder:"e.g https://universityofadelaide.box.com/s/hf64ts246ygp2qcv37tztkn3hn4zcl7z"},null,512),[[m,y.value]])])])):s.value==2?(o(),a("div",Pe,[e("form",ze,[Ee,c(e("input",{"onUpdate:modelValue":l[5]||(l[5]=t=>x.value=t),class:"block w-full mb-4 border border-gray-300 text-gray-700 rounded py-1 px-2 focus:bg-white",id:"title",type:"text"},null,512),[[m,x.value]]),Ge,He,c(e("input",{"onUpdate:modelValue":l[6]||(l[6]=t=>w.value=t),class:"block w-full border border-gray-300 text-gray-700 rounded py-1 px-2 mb-4 focus:bg-white",id:"keywords",type:"text"},null,512),[[m,w.value]]),Je,c(e("select",{id:"media-type","onUpdate:modelValue":l[7]||(l[7]=t=>n.value=t),class:"flow-root w-48 rounded border border-gray-300 focus:border-blue-500 px-4 py-2 font-medium mb-4"},[Ke,(o(!0),a(_,null,C(Object.keys(u(R)),t=>(o(),a("option",{value:t},g(t),9,Oe))),256))],512),[[Y,n.value]]),n.value?(o(),a("p",qe," Select Tags ")):v("",!0),e("div",We,[(o(!0),a(_,null,C(u(R)[n.value],([t,d])=>(o(),a("div",Xe,[c(e("input",{type:"checkbox","onUpdate:modelValue":l[8]||(l[8]=q=>U.value=q),value:t,id:t,class:"w-4 h-4"},null,8,Ye),[[L,U.value]]),e("label",Qe,g(d),1)]))),256))]),Ze,et,e("div",tt,[(o(!0),a(_,null,C(u(re),t=>(o(),a("div",lt,[c(e("input",{type:"checkbox","onUpdate:modelValue":l[9]||(l[9]=d=>S.value=d),id:t,value:t,class:"flex-none w-4 h-4 accent-red-600"},null,8,ot),[[L,S.value]]),e("label",st,g(t),1)]))),256))]),at,e("div",rt,[(o(!0),a(_,null,C(u(ne),t=>(o(),a("div",nt,[c(e("input",{type:"checkbox","onUpdate:modelValue":l[10]||(l[10]=d=>I.value=d),id:t,value:t,class:"flex-none w-4 h-4 accent-red-600"},null,8,it),[[L,I.value]]),e("label",dt,g(t),1)]))),256))]),ct,e("div",ut,[c(e("input",{"onUpdate:modelValue":l[11]||(l[11]=t=>k.value=t),type:"text",class:"border border-gray-300 text-gray-700 rounded py-1 px-2 focus:bg-white",placeholder:"e.g. Jane.Doe"},null,512),[[m,k.value]]),pt]),bt,n.value==="Video"||n.value==="Animation"?(o(),a("div",ft,[ht,c(e("input",{"onUpdate:modelValue":l[12]||(l[12]=t=>Q(i)?i.value=t:i=t),type:"text",class:"bg-gray-200 border border-gray-300 text-gray-700 rounded py-1 px-2 focus:bg-white w-full bg-white",placeholder:"https://youtu.be/ID"},null,512),[[m,u(i)]])])):(o(),a("div",vt,[j.value?v("",!0):(o(),a("div",mt,gt)),e("input",{type:"file",id:"file-upload",accept:".jpg, .jpeg, .png, .svg, .gif",onChange:G,class:h([j.value?"block":"hidden","w-full"])},null,34),u(i)?(o(),a("img",{key:1,src:u(i),width:"300",height:"300",class:"mt-6"},null,8,yt)):v("",!0)]))])])):s.value==3?(o(),a("div",xt,[e("h3",null," Showing Box uploader for folder with ID: "+g(p.value),1),wt,e("div",kt,[e("iframe",{src:u(E),width:"600",height:"400",allowfullscreen:"",webkitallowfullscreen:"",msallowfullscreen:""},`
              `,8,Ut)])])):v("",!0)]),_:1}),s.value!=3?(o(),a("div",St,[e("button",{class:"adx-button primary float-right",onClick:H}," Next Step ")])):s.value==3?(o(),a("div",Vt,[e("button",{class:"adx-button primary float-right",onClick:J}," Finish ")])):v("",!0)])])]),B.value?(o(),F(fe,{key:0})):v("",!0)],64))}});export{jt as default};
